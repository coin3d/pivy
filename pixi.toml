[project]
name = "pivy"
version = "0.1.0"
description = "Add a short description here"
authors = ["looooo <sppedflyer@gmail.com>"]
channels = ["conda-forge"]
platforms = ["win-64", "linux-64", "osx-64", "osx-arm64", "linux-aarch64"]

[environments]
build = ["build"]

[feature.build.dependencies]
cmake = ">=3.30.1,<3.31"
ninja = ">=1.12.1,<1.13"
swig = ">=4.2.1,<4.3"
python = ">=3.12.4,<3.13"
coin3d = ">=4.0.2,<4.1"
soqt6 = ">=1.6.2,<1.7"
qt6-main = ">=6.7.2,<6.8"
pyside6 = ">=6.7.2,<6.8"

[feature.build.tasks]
configure = { cmd = ["cmake", "-G", "Ninja", "-B", "build", "-S", ".",
                     "-D", "CMAKE_BUILD_TYPE='Debug'",
                     "-D", "CMAKE_INSTALL_PREFIX=$CONDA_PREFIX",
                     "-D", "CMAKE_INSTALL_RPATH=$CONDA_PREFIX/lib",
                     "-D", "PIVY_USE_QT6=ON",
                     "-D", "QT_HOST_PATH=$CONDA_PREFIX"]}

build = { cmd = ["ninja", "-C", "build", "install"], depends-on = ["configure"] }

test = { cmd = ["python", "tests/coin_tests.py"] }
visual_test = { cmd = ["python", "tests/visual_test.py"] }

